# Auto-generated by SAM Template Generator
# DO NOT EDIT MANUALLY - Regenerate with: esb build

defaults:
  environment:
    GATEWAY_INTERNAL_URL: "${GATEWAY_INTERNAL_URL}"
    LOG_LEVEL: "${LOG_LEVEL}"
    AWS_ACCESS_KEY_ID: "${RUSTFS_ACCESS_KEY}"
    AWS_SECRET_ACCESS_KEY: "${RUSTFS_SECRET_KEY}"
    AWS_DEFAULT_REGION: "ap-northeast-1"
  scaling:
    idle_timeout: 300
    acquire_timeout: 30.0

functions:
{{- range .Functions }}
  {{ .Name }}:
    {{- if .Timeout }}
    timeout: {{ .Timeout }}
    {{- end }}
    {{- if .MemorySize }}
    memory_size: {{ .MemorySize }}
    {{- end }}
    {{- if .Environment }}
    environment:
      {{- range $key, $value := .Environment }}
      {{ $key }}: "{{ $value }}"
      {{- end }}
    {{- end }}
    {{- if .Scaling }}
    scaling:
      {{- range $key, $value := .Scaling }}
      {{ $key }}: {{ $value }}
      {{- end }}
    {{- end }}
    {{- if .HasSchedules }}
    events:
      {{- range .Events }}
      {{- if eq .Type "Schedule" }}
      - schedule:
          rate: {{ .ScheduleExpression | quote }}
          {{- if .Input }}
          input: {{ .Input | quote }}
          {{- end }}
      {{- end }}
      {{- end }}
    {{- end }}
{{- end }}
