# syntax=docker/dockerfile:1.7
# Auto-generated by SAM Template Generator
# DO NOT EDIT MANUALLY - Regenerate with: esb build
# Source: template.yaml
# FunctionName: {{ .Name }}
FROM {{ .BaseImage }}

# ESB Runtime
COPY {{ .SitecustomizeSource }} /opt/python/sitecustomize.py

COPY --from=meta /version.json /app/version.json

{{- range .Layers }}
# Layer: {{ .Name }}
COPY {{ .ContentURI }}/ /opt/
{{- end }}
{{- if .HasRequirements }}

# Function dependencies
COPY {{ .CodeURI }}requirements.txt ${LAMBDA_TASK_ROOT}/
RUN pip install -r ${LAMBDA_TASK_ROOT}/requirements.txt
{{- end }}

# Function code
COPY {{ .CodeURI }} ${LAMBDA_TASK_ROOT}/

# Handler
CMD [ "{{ .Handler }}" ]
